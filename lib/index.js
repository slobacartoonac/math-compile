!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TypeMath=t():e.TypeMath=t()}(self,(()=>(()=>{"use strict";var e={738:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluate=t.NegateExp=void 0;const n=o(403),r=o(215);class i extends r.Exp{constructor(e){super(),this.expression=e}}t.NegateExp=i,t.evaluate=function e(t,o={}){switch(!0){case t instanceof r.NoopExp:return 0;case t instanceof r.BinaryExp:let u=t;return function(e,t,o){switch(o){case n.TokenType.tok_op_plus:return e+t;case n.TokenType.tok_op_minus:return e-t;case n.TokenType.tok_op_multiply:return e*t;case n.TokenType.tok_op_devide:return e/t;case n.TokenType.tok_op_power:return Math.pow(e,t);case n.TokenType.tok_op_modulo:return e%t;default:throw new Error("Operation "+o+" unknown")}}(e(u.left,o),e(u.right,o),u.op);case t instanceof r.IdentifierExp:return o[t.value];case t instanceof r.NumberExp:return t.value;case t instanceof r.BracketsExp:return e(t.expression,o);case t instanceof i:return-e(t.expression,o);default:return-1}}},403:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Token=t.TokenType=t.tokenize=t.setInput=t.NumVal=t.IdentifierStr=t.getTokenElement=t.getNextToken=t.CurTok=void 0;const n=o(896);function r(){return t.CurTok=f()}function i(){switch(t.CurTok){case a.tok_identifier:return new c(a.tok_identifier,u.Col,u.Line,t.IdentifierStr);case a.tok_number:return new c(a.tok_number,u.Col,u.Line,"",t.NumVal);default:return new c(t.CurTok,u.Col,u.Line)}}t.getNextToken=r,t.getTokenElement=i;let u,p=" ",s={Line:1,Col:0};function l(e){_=e,p="",s={Line:1,Col:0},t.CurTok=null}var a;function k(){let e=function(){let e=_.split(""),t=e.shift();return void 0===t?(_="\0",n.EOF):(_=e.join(""),t)}();return"\n"==e||"\r"==e?(s.Line++,s.Col=0):s.Col++,e}t.setInput=l,t.tokenize=function(e){l(e);let o=[];for(;t.CurTok!=a.tok_eof;)r(),o.push(i());return o},function(e){e.tok_eof="tok_eof",e.tok_identifier="tok_identifier",e.tok_number="tok_number",e.tok_op_plus="tok_op_plus",e.tok_op_minus="tok_op_minus",e.tok_op_multiply="tok_op_multiply",e.tok_op_devide="tok_op_devide",e.tok_op_power="tok_op_power",e.tok_op_modulo="tok_op_modulo",e.tok_open="tok_open",e.tok_close="tok_close"}(a=t.TokenType||(t.TokenType={}));class c{constructor(e,t,o,n="",r=0){this.tokenType=e,this.column=t,this.line=o,this.str=n,this.value=r}}t.Token=c;let _="";function f(){for(;(0,n.isspace)(p);)p=k();if(u=s,(0,n.isalpha)(p)){for(t.IdentifierStr=p;(0,n.isalnum)(p=k());)t.IdentifierStr+=p;return a.tok_identifier}if((0,n.isdigit)(p)||"."==p){let e="";do{e+=p,p=k()}while((0,n.isdigit)(p)||"."==p);return t.NumVal=(0,n.strtod)(e),a.tok_number}if("+"==p)return p=k(),a.tok_op_plus;if("-"==p)return p=k(),a.tok_op_minus;if("*"==p)return p=k(),a.tok_op_multiply;if("/"==p)return p=k(),a.tok_op_devide;if("^"==p)return p=k(),a.tok_op_power;if("%"==p)return p=k(),a.tok_op_modulo;if(["{","[","("].includes(p))return p=k(),a.tok_open;if(["}","]",")"].includes(p))return p=k(),a.tok_close;if("#"==p){do{p=k()}while(p!=n.EOF&&"\n"!=p&&"\r"!=p);if(p!=n.EOF)return f()}if(p==n.EOF)return a.tok_eof;let e=p;throw p=k(),Error("Undefined token"+e+" ( "+e.charCodeAt(0)+" ) at: "+JSON.stringify(u))}},215:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseProgram=t.BinaryExp=t.IdentifierExp=t.NumberExp=t.BracketsExp=t.NegateExp=t.NoopExp=t.Exp=void 0;const n=o(403);let r,i,u=0;function p(){return u++,r.length<=u?(u=r.length-1,new n.Token(n.TokenType.tok_eof,0,0)):(i=r[u],r[u])}function s(){return r[u]}function l(e){return s().tokenType===e}class a{}t.Exp=a,t.NoopExp=class extends a{};class k extends a{constructor(e){super(),this.expression=e}}t.NegateExp=k;class c extends a{constructor(e){super(),this.expression=e}}t.BracketsExp=c;class _ extends a{constructor(e){super(),this.value=e}}t.NumberExp=_;class f extends a{constructor(e){super(),this.value=e}}t.IdentifierExp=f;class d extends a{constructor(e,t,o){super(),this.left=e,this.right=t,this.op=o}}t.BinaryExp=d;class T extends a{constructor(e){super(),this.priority=function(e){return{[n.TokenType.tok_op_plus]:1,[n.TokenType.tok_op_minus]:1,[n.TokenType.tok_op_multiply]:2,[n.TokenType.tok_op_devide]:2,[n.TokenType.tok_op_modulo]:4,[n.TokenType.tok_op_power]:5}[e]}(e),this.op=e}}function y(){var e,t;if(l(n.TokenType.tok_eof)||l(n.TokenType.tok_close))return null;if([n.TokenType.tok_op_plus,n.TokenType.tok_op_minus,n.TokenType.tok_op_multiply,n.TokenType.tok_op_devide,n.TokenType.tok_op_modulo,n.TokenType.tok_op_power].includes(s().tokenType)){var o=s().tokenType;return p(),new T(o)}if(l(n.TokenType.tok_open))return function(){p();let e=x();return p(),new c(e)}();if(l(n.TokenType.tok_op_minus))return p(),new k(x());if(l(n.TokenType.tok_op_plus))return p(),y();if(l(n.TokenType.tok_identifier)){let t=(null===(e=s())||void 0===e?void 0:e.str)||"";return p(),new f(t)}let r=(null===(t=s())||void 0===t?void 0:t.value)||0;return p(),new _(r)}function x(){let e=null,t=[];for(;!l(n.TokenType.tok_eof)&&!l(n.TokenType.tok_close);)t.push(y());for(;t.length>1;){const e=(o=void 0,void 0,o=t.map((function(e){return e instanceof T?e.priority:0})),r=Math.max.apply(Math,o),o.indexOf(r)),n=t[e],i=t[e-1],u=t[e+1];t.splice(e-1,3,new d(i,u,n.op))}var o,r;return e=t[0],e||new _(0)}t.parseProgram=function(e){return r=(0,n.tokenize)(e),u=0,x()}},896:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EOF=t.strtod=t.isalpha=t.isalnum=t.isdigit=t.isspace=void 0,t.isspace=function(e){return/\s/.test(e)||""==e},t.isdigit=function(e){return/[0-9]/.test(e)},t.isalnum=function(e){return/[a-zA-Z0-9]/.test(e)},t.isalpha=function(e){return/[a-zA-Z]/.test(e)},t.strtod=function(e){let t=parseFloat(e);return isNaN(t)?0:t},t.EOF="\0"}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}var n={};return(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.parseProgram=e.evaluate=e.execute=void 0;const t=o(215);Object.defineProperty(e,"parseProgram",{enumerable:!0,get:function(){return t.parseProgram}});const r=o(738);Object.defineProperty(e,"evaluate",{enumerable:!0,get:function(){return r.evaluate}});let i={};e.execute=function(e,o={}){let n="",u=0;try{let n=new t.NoopExp;i[e]?n=i[e]:(n=(0,t.parseProgram)(e),i[e]=n),u=(0,r.evaluate)(n,o)}catch(e){n=e.toString()}return{res:u,err:n}}})(),n})()));